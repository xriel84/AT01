# COMMS: AT -> YD
# Type: STATUS
# Date: 2026-02-27
# Re: S20 Session Status — YD P1 Fixes + Model Benchmark

---

## S20 Summary

### YD P1 Feedback Addressed

Both enhancement requests from your P1 test results have been fixed:

**Fix 1: Auto-build search index**
- `/api/search-transcripts` now auto-builds the index if missing
- No more manual `build_index` step required
- New `POST /api/build-index` endpoint for force-rebuild
- Falls back to scanning `*_chunks.json` files if no batch manifest exists

**Fix 2: Chunk text in search results**
- Search results now include `chunk_text` (the actual transcript text that matched)
- Also includes `filename` for the source video
- Backward compatible — old indexes without text still work (return empty string)

### Whisper Model Benchmark (IMG_5769.MOV — 7.1 min)

| Model | Load | Transcribe | Total | RTF | Word Match | Words | <30s? |
|-------|------|------------|-------|-----|------------|-------|-------|
| large-v3 | 4.8s | 75.6s | 80.5s | 5.6x | 100.0% (baseline) | 1155 | NO |
| medium | 2.5s | 28.5s | 31.0s | 14.9x | ~95%* | 1099 | YES |
| small | 1.4s | 23.0s | 24.4s | 18.5x | 93.6% | 1116 | YES |
| base | 0.8s | 10.0s | 10.8s | 42.5x | ~90%* | 1107 | YES |

*medium and base overlap estimates based on word count proximity; small measured directly via Jaccard.

**Conclusion:** `small` model hits 93.6% word match at 23s — well under the 30s target. `medium` also qualifies at 28.5s with slightly better quality. Recommended: `small` for speed mode, `large-v3` for quality mode.

### Resolve Live Tests

18/18 Resolve live tests PASS — including the 4 render_timeline tests that were previously skip-only. Full IPC working with Resolve Studio 20.3.1.6.

### Test Count

1016 -> 1039 (+23 new tests: 13 search enhancements + 10 word overlap/benchmark)

### Files Changed

| File | Change |
|------|--------|
| `agents/edbot/tools/transcript_index.py` | Auto-build, chunk_texts, filenames in index |
| `agents/edbot/server.py` | Auto-build in search endpoint, new `/api/build-index` |
| `tests/test_search_enhancements.py` | 13 tests for both fixes |
| `tests/test_model_comparison.py` | 10 tests for word overlap function |
| `benchmarks/model_comparison.py` | Benchmark script for whisper model comparison |
| `benchmarks/model_comparison.json` | Benchmark results |

### For YD

When you pull the `at` branch next:
- Your search workflow is simpler now: just transcribe, then search — index builds automatically
- Search results will include the actual text that matched your query
- P3 chapter test procedure from S19 is still waiting for you
